% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/caiso_api_wrapper.R
\name{fetch_lmp_data}
\alias{fetch_lmp_data}
\title{Fetch Locational Marginal Price (LMP) Data from Grid Status API}
\usage{
fetch_lmp_data(client, dataset = "caiso_lmp_real_time_15_min", ...)
}
\arguments{
\item{client}{A GridStatusClient object created with \code{\link{create_gridstatus_client}}}

\item{dataset}{Name of the CAISO LMP dataset to query. (default: "caiso_lmp_real_time_15_min")
Options:
\itemize{
\item "caiso_lmp_real_time_15_min": 15-minute real-time LMP data
\item "caiso_lmp_real_time_5_min": 5-minute real-time LMP data
\item "caiso_lmp_day_ahead_hourly": 1-minute real-time LMP data
}}

\item{start_time}{Start time for data retrieval (optional)
\itemize{
\item Format: "YYYY-MM-DD HH:MM:SS" or "YYYY-MM-DD"
\item Timezone: Automatically converted to UTC
\item If not provided, uses earliest available time
}}

\item{end_time}{End time for data retrieval (optional)
\itemize{
\item Format: "YYYY-MM-DD HH:MM:SS" or "YYYY-MM-DD"
\item Timezone: Automatically converted to UTC
\item If not provided, uses latest available time
}}

\item{filter_column}{Column to apply filtering on (optional)}

\item{filter_value}{Value to filter by (optional)}

\item{filter_operator}{Filtering operator (optional)
Supported operators:
\itemize{
\item "=" (exact match)
\item ">" (greater than)
\item "<" (less than)
\item ">=" (greater than or equal to)
\item "<=" (less than or equal to)
\item "in" (multiple value matching)
}}

\item{columns}{Specific columns to retrieve (optional)
\itemize{
\item Character vector of column names
\item If not provided, returns all columns
}}

\item{limit}{Maximum number of records to return}

\item{page_size}{Number of records per page (optional)
\itemize{
\item Uses API's default page size if not specified
}}

\item{resample}{Frequency to resample data (optional)}

\item{resample_by}{Columns to group by when resampling (optional)
\itemize{
\item Default: Groups by time index column
}}

\item{resample_function}{Aggregation method for resampling (default: "mean")
Options:
\itemize{
\item "mean"
\item "sum"
\item "min"
\item "max"
\item "stddev"
\item "count"
\item "variance"
}}

\item{publish_tm}{Controls filtering based on publish time (optional)
\itemize{
\item "latest_report": Most recently published report
\item "latest": Most recent record for each timestamp
\item Specific timestamp string
\item NULL: No filtering
}}

\item{use_cursor_pagination}{Use cursor-based pagination (default: TRUE)}

\item{tz}{Timezone for timestamp conversion (default: "UTC")}
}
\value{
A data frame containing the retrieved LMP data
}
\description{
Retrieve LMP data with flexible querying and filtering options.
}
\section{Nuances and Considerations}{

\itemize{
\item Input times are converted to UTC
\item Can specify output timezone via \code{tz} parameter
\item Automatically handles multi-page responses
\item Supports both cursor and traditional pagination
\item Automatically converts:
\itemize{
\item Timestamps to POSIXct
\item Categorical columns to factors
\item Numeric columns to numeric type
}
\item Provides informative error messages
\item Gracefully handles conversion issues
}
}

\examples{
\dontrun{
# Create a client
client <- create_caiso_client(api_key = "your_api_key")

# Basic usage
lmp_data <- fetch_lmp_data(
  client,
  start = "2024-01-01 00:00:00",
  end = "2024-01-02 00:00:00"
)

# Advanced filtering
filtered_data <- fetch_lmp_data(
  client,
  filter_column = "location",
  filter_value = "",
  filter_operator = "=",
  columns = c("interval_start_utc", "lmp", "location")
)

# Resampling data
resampled_data <- fetch_lmp_data(
  client,
  resample = "1H",  # Resample to hourly
  resample_function = "mean",
  resample_by = c("location", "market")
)
}

}
\seealso{
\code{\link{create_caiso_client}}
}
